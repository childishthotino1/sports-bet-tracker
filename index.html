<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#07070e">
  <title>Baltimore Bets</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- ── PIN Screen ──────────────────────────────────────── -->
<div id="pin-screen">
  <div class="pin-container">
    <div class="pin-wordmark">
      <div class="pin-wordmark-top">Baltimore</div>
      <div class="pin-title">Bet Tracker</div>
      <div class="pin-subtitle">Enter PIN to continue</div>
    </div>
    <div class="pin-dots">
      <span class="pin-dot" id="dot-0"></span>
      <span class="pin-dot" id="dot-1"></span>
      <span class="pin-dot" id="dot-2"></span>
      <span class="pin-dot" id="dot-3"></span>
    </div>
    <div id="pin-error" class="pin-error hidden">Incorrect PIN — try again</div>
    <div class="pin-keypad">
      <button class="pin-key" data-digit="1">1</button>
      <button class="pin-key" data-digit="2">2</button>
      <button class="pin-key" data-digit="3">3</button>
      <button class="pin-key" data-digit="4">4</button>
      <button class="pin-key" data-digit="5">5</button>
      <button class="pin-key" data-digit="6">6</button>
      <button class="pin-key" data-digit="7">7</button>
      <button class="pin-key" data-digit="8">8</button>
      <button class="pin-key" data-digit="9">9</button>
      <button class="pin-key pin-key-clear" data-action="clear">⌫</button>
      <button class="pin-key" data-digit="0">0</button>
      <button class="pin-key pin-key-empty"></button>
    </div>
  </div>
</div>

<!-- ── App ─────────────────────────────────────────────── -->
<div id="app" class="hidden">

  <header>
    <span class="header-logo">◈ Baltimore</span>
    <span id="header-title">Baltimore Bets</span>
    <button class="header-reload" id="header-reload" title="Reload data">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="23 4 23 10 17 10"/>
        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
      </svg>
    </button>
  </header>

  <main>

    <!-- Pool View -->
    <div id="view-pool" class="view active">
      <div id="pool-content">
        <div class="empty-state">Loading...</div>
      </div>
    </div>

    <!-- Bets View -->
    <div id="view-bets" class="view">
      <div class="bets-view-header">
        <div class="filter-tabs">
          <button class="filter-tab active" data-filter="pending">Open</button>
          <button class="filter-tab" data-filter="won">Won</button>
          <button class="filter-tab" data-filter="lost">Lost</button>
          <button class="filter-tab" data-filter="push">Push</button>
          <button class="filter-tab" data-filter="all">All</button>
        </div>
        <button class="bets-toggle-btn" id="bets-view-toggle">≡ Cards</button>
      </div>
      <div id="bets-list"></div>
    </div>

    <!-- Add Bet View -->
    <div id="view-add-bet" class="view">
      <div id="add-bet-view"></div>
    </div>

    <!-- Brent View -->
    <div id="view-brent" class="view">
      <div id="brent-content">
        <div class="empty-state">Loading...</div>
      </div>
    </div>

    <!-- Dan View -->
    <div id="view-dan" class="view">
      <div id="dan-content">
        <div class="empty-state">Loading...</div>
      </div>
    </div>

    <!-- Stats View -->
    <div id="view-stats" class="view">
      <div id="stats-content">
        <div class="empty-state">Loading...</div>
      </div>
    </div>

  </main>

  <!-- Bottom Nav -->
  <nav id="bottom-nav">

    <button class="nav-btn active" data-view="pool">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 2C8 2 4 5 4 9c0 5 8 13 8 13s8-8 8-13c0-4-4-7-8-7z"/>
        <circle cx="12" cy="9" r="2.5"/>
      </svg>
      <span>Honeypot</span>
    </button>

    <button class="nav-btn" data-view="bets">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="8" y1="6" x2="21" y2="6"/>
        <line x1="8" y1="12" x2="21" y2="12"/>
        <line x1="8" y1="18" x2="21" y2="18"/>
        <line x1="3" y1="6" x2="3.01" y2="6"/>
        <line x1="3" y1="12" x2="3.01" y2="12"/>
        <line x1="3" y1="18" x2="3.01" y2="18"/>
      </svg>
      <span>Bets</span>
    </button>

    <button class="nav-btn nav-btn-add" data-view="add-bet">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
        <line x1="12" y1="5" x2="12" y2="19"/>
        <line x1="5" y1="12" x2="19" y2="12"/>
      </svg>
    </button>

    <button class="nav-btn" data-view="brent">
      <div class="nav-btn-person">B</div>
      <span>Brent</span>
    </button>

    <button class="nav-btn" data-view="dan">
      <div class="nav-btn-person">D</div>
      <span>Dan</span>
    </button>

    <button class="nav-btn" data-view="stats">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="20" x2="18" y2="10"/>
        <line x1="12" y1="20" x2="12" y2="4"/>
        <line x1="6" y1="20" x2="6" y2="14"/>
      </svg>
      <span>Stats</span>
    </button>

  </nav>
</div>

<!-- Modal -->
<div id="modal" class="hidden">
  <div class="modal-sheet">
    <div id="modal-content"></div>
  </div>
</div>

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js');
  }
</script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
<script src="js/config.js"></script>
<script src="js/math.js"></script>
<script src="js/db.js"></script>
<script src="js/app.js"></script>
</body>
</html>
